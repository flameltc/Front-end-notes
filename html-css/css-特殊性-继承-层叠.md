## CSS特殊性、继承、层叠

#### 特殊性--->每一个选择器都有特殊性，而特殊性由选择器本身决定

-  **内联样式--->加1,0,0,0**

- **ID选择器--->加0,1,0,0**

- **类选择器，伪类选择器，属性选择器--->加0,0,1,0**

- **标签选择器，伪元素--->加0,0,0,1**

- **通配选择器--->加0,0,0,0（注意：0特殊性和没有特殊性是有区别的）**

- 比如如下例子：

  ```
  * ---> 0,0,0,0
  div p span ---> 0,0,0,3
  a:hover ---> 0,0,1,1
  div + input[type] ---> 0,0,1,2
  div.content ---> 0,0,1,1
  div#header ---> 0,1,0,1
  ```

#### 继承--->是从一个元素向其后代元素传递属性值所采用的机制

- 基于继承机制，样式不仅会应用到指定的元素，还会应用到它的后代元素，如下例子
  ```html
  <style>
  	p {
          color: red; /* 给p元素指定一个颜色，不仅用于p元素的文本aaa，还将应用到em元素的文本上 */
  	}
  </style>
  
  <p>aaa<em>bbb</em></p>
  ```

- 有些属性不能继承，比如```margin```，```padding```，```border```等等

- **继承的值根本没有特殊性，连0的特殊性都没有**

  ```css
  * {
        color: red;
  }
  .test {
        color: blue;
  }
  
  /*
   *<p class="test">
   *  aaa
   *  <em>bbb</em>
   *</p>
   *<p>cccccddddd</p>
   */
  
  /* 通配选择器的特殊性为0000，即0特殊性；则其指定的颜色red要优先于em元素继承于p元素的blue */
  
  
  .test {
        color: red;
  }
  
  /*
   *<div class="test">
   *  <p>aaa</p>
   *  <a href="">bbb</a>
   *</div>
   */
  
  /* 此时a链接的颜色不会改变，因为a链接用户代理的样式特殊性优于a链接继承于.test的指定颜色 */
  ```


#### 层叠

- **在确定向一个元素应用哪些属性值时，浏览器不仅要考虑继承，也要考虑声明的特殊性，还需要考虑声明本身的来源，这个过程即为层叠**

- **层叠规则：通过权重来确定**

  - 按显式权重，有`!important`标志的样式的**权重**大于没有`!important`标志的样式

  - 按声明来源排序，**权重**由大到小如下排列
    - 读者的重要声明
    - 创作人员的重要声明 
    - 创作人员的正常声明 
    - 读者的正常声明 
    - 用户代理声明
  - 按特殊性排序，样式的特殊性越高则其**权重**越大
  - 按顺序排序，如果两个样式的显式权重，来源，特殊性都相同，则按在样式表中后出现的一个胜出
